<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/template/_template.xhtml">

    <h:head>
        <h:outputStylesheet library="css" name="articlerevsys.css"/>
    </h:head>


    <ui:define name="metaInfo">


    </ui:define>

    <ui:define name="tracker"/>
    <ui:define name="centerpane"> 
        <div style="padding: auto auto; border: 1px; border-style: solid;">

            <h:form>

                <h:panelGrid style="height: 600px; width: 800px; margin: 0 auto; border: 2px; border-style: solid" columns="1">

                    <p:outputLabel style="margin: auto auto !important" value="Publication Title"></p:outputLabel>
                    <p:inputText style="margin: 0 20px" placeholder="Title"></p:inputText>

                    <p:outputLabel value="Publication Url"></p:outputLabel>
                    <p:inputText placeholder="Url"></p:inputText>

                    <p:outputLabel value="Summary"></p:outputLabel>
                    <p:inputTextarea placeholder="Write your summary here."></p:inputTextarea>



                    <!-- POSITIVES TABLE -->
                    <p:dataTable id="positivesTable" 
                                 editable="true"
                                 binding="#{positivesBinding}"
                                 widgetVar="positivesTable" 
                                 value="#{reviewBean.positives}" 
                                 var="positive">
                        <f:facet name="header">Positives</f:facet>
                        <p:column>
                            <p:inputTextarea
                                style="width: 100%; margin-right: 10px"
                                placeholder="Positive ##{positivesBinding.rowIndex + 1}" 
                                value="#{reviewBean.positives[positivesBinding.rowIndex]}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton 
                                id="remove-positive"
                                disabled="#{reviewBean.majorPoints.size() == 3}"
                                value="remove"
                                type="submit"
                                actionListener="#{reviewBean.removePositiveAtIx(positivesBinding.rowIndex)}"
                                update="positivesTable"
                                process="positivesTable"/>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton 
                        value="add"
                        type="submit"
                        actionListener="#{reviewBean.addPositive()}"
                        update="positivesTable"
                        process="@this positivesTable"
                        />


                    <!-- NEGATIVES TABLE -->
                    <p:dataTable id="negativesTable" 
                                 editable="true"
                                 binding="#{negativesBinding}"
                                 widgetVar="negativesTable" 
                                 value="#{reviewBean.negatives}" 
                                 var="negative">
                        <f:facet name="header">Negatives</f:facet>
                        <p:column>
                            <p:inputTextarea 
                                style="width: 100%; margin-right: 10px"
                                placeholder="Negative ##{negativesBinding.rowIndex + 1}" 
                                value="#{reviewBean.negatives[negativesBinding.rowIndex]}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton 
                                value="remove" 
                                type="submit"
                                actionListener="#{reviewBean.removeNegativeAtIx(negativesBinding.rowIndex)}"
                                update="negativesTable"
                                process="negativesTable"/>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton 
                        value="add"
                        type="submit"
                        actionListener="#{reviewBean.addNegative()}" 
                        update="negativesTable"
                        process="@this negativesTable" />


                    <!-- MAJOR POINTS TABLE -->
                    <p:dataTable id="majorPointsTable" 
                                 editable="true"
                                 binding="#{majorPointsBinding}"
                                 widgetVar="majorPointsTable" 
                                 value="#{reviewBean.majorPoints}" >
                        <f:facet name="header">Major Points</f:facet>
                        <p:column>
                            <p:inputTextarea 
                                style="width: 100%; margin-right: 10px"
                                placeholder="Major Point ##{majorPointsBinding.rowIndex + 1}" 
                                value="#{reviewBean.majorPoints[majorPointsBinding.rowIndex]}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton 
                                value="remove" 
                                type="submit"
                                actionListener="#{reviewBean.removeMajorPointAtIx(majorPointsBinding.rowIndex)}"
                                update="majorPointsTable"
                                process="majorPointsTable"/>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton 
                        value="add"
                        type="submit"
                        actionListener="#{reviewBean.addMajorPoint()}" 
                        update="majorPointsTable"
                        process="@this majorPointsTable" />


                    <!-- MINOR POINTS TABLE -->
                    <p:dataTable id="minorPointsTable" 
                                 editable="true"
                                 binding="#{minorPointsBinding}"
                                 widgetVar="minorPointsTable" 
                                 value="#{reviewBean.minorPoints}" >
                        <f:facet name="header">Minor Points</f:facet>
                        <p:column>
                            <p:inputTextarea 
                                value="#{reviewBean.minorPoints[minorPointsBinding.rowIndex]}"
                                placeholder="Minor Point ##{minorPointsBinding.rowIndex + 1}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton 
                                value="remove" 
                                type="submit"
                                actionListener="#{reviewBean.removeMinorPointAtIx(minorPointsBinding.rowIndex)}"
                                update="minorPointsTable"
                                process="minorPointsTable"/>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton 
                        value="add"
                        type="submit"
                        actionListener="#{reviewBean.addMinorPoint()}" 
                        update="minorPointsTable"
                        process="@this minorPointsTable"  />


                    <p:outputLabel value="Recommendation"></p:outputLabel>
                    <p:selectOneMenu value="#{reviewBean.recommendation}">
                        <f:selectItems value="#{reviewBean.recommendations}"></f:selectItems>
                    </p:selectOneMenu>


                    <p:outputLabel value="Reviewer Name"></p:outputLabel>
                    <p:inputText value="#{reviewBean.reviewerName}"/>

                    <p:commandButton 
                        value="Blah" 
                        type="submit"
                        actionListener="#{reviewBean.attemptReviewSubmission()}"/>

                </h:panelGrid>


            </h:form>
        </div>

    </ui:define>
</ui:composition>
