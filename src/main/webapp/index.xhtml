<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:head>
        <title>Review a Publication</title>
        <style type="text/css">

            div[id="myForm:positivesTable"] thead {
                display:none;
            }
            div[id="myForm:negativesTable"] thead {
                display:none;
            }
            div[id="myForm:majorPointsTable"] thead {
                display:none;
            }
            div[id="myForm:minorPointsTable"] thead {
                display:none;
            }

            ::-webkit-input-placeholder {
                color: #BBBBBB !important; 
            }

            ::-moz-placeholder { 
                color: #BBBBBB !important; 
            }

            .rev-heading-div {
                margin: 8px 0;
            }
            
            .rev-counter-output {
                font-size: 10pt; 
                margin-right: 4%; 
                margin-top: 4px; 
                float: right;
            }

            .rev-input {
                color: #515366;
                width: 92%; 
                margin-left: 4%;
            }

            .rev-heading-large {
                color: #515366;
                font-family: sans-serif;
                font-size: 13pt;
                font-weight: bold;
                padding-left: 4%;
                padding-top: 14px;
            }

            .rev-heading {
                color: #515366;
                font-family: sans-serif;
                font-size: 11pt;
                padding-left: 4%;
                padding-top: 14px;
            }
        </style>


    </h:head>
    <h:body style="background-color: #f8f9fa;">

        <div style="margin: 0 auto; max-width: 800px; border: 4px; border-style: solid; border-color: black">

            <h:form id="myForm">

                <div style="margin: 16px 0">
                    <span class="rev-heading-large">PUBLICATION INFO</span>
                </div>

                
                    <div class="rev-heading-div">
                        <span class="rev-heading">Title</span>
                    </div>
                    <div>
                        <p:inputText
                            class="rev-input"
                            placeholder="Title"
                            maxlength="50"/>
                    </div>
                

                <span class="rev-heading">Publication Url</span>
                <p:inputText 
                    placeholder="Url" 
                    class="rev-input" 
                    maxlength="100"/>

                <span class="rev-heading">Summary</span>
                <p:inputTextarea 
                    class="rev-input"
                    counter="summaryCounter"
                    counterTemplate="{0} characters remaining."
                    placeholder="Write your summary here." 
                    maxlength="2000"
                    rows="8" />
                <br/>
                <h:outputText
                    id="summaryCounter" 
                    class="rev-counter-output"/>
                <br style="margin-bottom: 20px"/>



                <!-- POSITIVES TABLE -->
                <span class="rev-heading">Positives</span>
                <p:dataTable id="positivesTable" 
                             editable="true"
                             style="margin-top: 20px;"
                             binding="#{positivesBinding}"
                             widgetVar="positivesTable" 
                             value="#{reviewBean.positives}"
                             escapeText="false"
                             var="positive">
                    <p:column style="width: 85%">
                        <p:inputTextarea
                            style="width: 100%"
                            placeholder="Positive ##{positivesBinding.rowIndex + 1}" 
                            value="#{reviewBean.positives[positivesBinding.rowIndex]}"/>
                    </p:column>
                    <p:column>
                        <div align="center">
                            <p:commandButton 
                                id="removePositive"
                                icon="pi pi-times" 
                                styleClass="rounded-button ui-button-danger"
                                disabled="#{reviewBean.minPositivesReached()}"
                                type="submit"
                                actionListener="#{reviewBean.removePositiveAtIx(positivesBinding.rowIndex)}"
                                update="@this :myForm:addPositive positivesTable"
                                process="@this :myForm:addPositive positivesTable"/>
                        </div>
                    </p:column>
                </p:dataTable>
                <div align="center" style="margin: 8px;">
                    <p:commandButton 
                        id="addPositive"
                        value="Add Positive"
                        type="submit"
                        style="width: 180px; margin: 0 auto"
                        disabled="#{reviewBean.maxPositivesReached()}"
                        actionListener="#{reviewBean.addPositive()}"
                        update="@this myForm:positivesTable:removePositive positivesTable"
                        process="@this myForm:positivesTable:removePositive positivesTable"
                        />
                </div>


                <!-- NEGATIVES TABLE -->
                <h4 class="rev-heading">Negatives</h4>
                <p:dataTable id="negativesTable" 
                             editable="true"
                             binding="#{negativesBinding}"
                             widgetVar="negativesTable" 
                             value="#{reviewBean.negatives}" 
                             var="negative">
                    <f:facet name="header">Negatives</f:facet>
                    <p:column>
                        <p:inputTextarea 
                            style="width: 100%; margin-right: 10px"
                            placeholder="Negative ##{negativesBinding.rowIndex + 1}" 
                            value="#{reviewBean.negatives[negativesBinding.rowIndex]}"/>
                    </p:column>
                    <p:column>
                        <p:commandButton
                            id="removeNegative"
                            value="remove" 
                            type="submit"
                            disabled="#{reviewBean.minNegativesReached()}"
                            actionListener="#{reviewBean.removeNegativeAtIx(negativesBinding.rowIndex)}"
                            update="@this :myForm:addNegative negativesTable"
                            process="@this :myForm:addNegative negativesTable"/>
                    </p:column>
                </p:dataTable>
                <p:commandButton
                    id="addNegative"
                    value="Add Negative"
                    type="submit"
                    disabled="#{reviewBean.maxNegativesReached()}"
                    actionListener="#{reviewBean.addNegative()}" 
                    update="@this myForm:negativesTable:removeNegative negativesTable"
                    process="@this myForm:negativesTable:removeNegative negativesTable" />


                <!-- MAJOR POINTS TABLE -->
                <h4 class="rev-heading">Major Points</h4>
                <p:dataTable id="majorPointsTable" 
                             editable="true"
                             binding="#{majorPointsBinding}"
                             widgetVar="majorPointsTable" 
                             value="#{reviewBean.majorPoints}" >
                    <f:facet name="header">Major Points</f:facet>
                    <p:column>
                        <p:inputTextarea 
                            style="width: 100%; margin-right: 10px"
                            placeholder="Major Point ##{majorPointsBinding.rowIndex + 1}" 
                            value="#{reviewBean.majorPoints[majorPointsBinding.rowIndex]}"/>
                    </p:column>
                    <p:column>
                        <p:commandButton
                            id="removeMajorPoint"
                            value="remove" 
                            type="submit"
                            disabled="#{reviewBean.minMajorPointsReached()}"
                            actionListener="#{reviewBean.removeMajorPointAtIx(majorPointsBinding.rowIndex)}"
                            update="@this :myForm:addMajorPoint majorPointsTable"
                            process="@this :myForm:addMajorPoint majorPointsTable" />
                    </p:column>
                </p:dataTable>
                <p:commandButton 
                    id="addMajorPoint"
                    value="Add Major Point"
                    type="submit"
                    disabled="#{reviewBean.maxMajorPointsReached()}"
                    actionListener="#{reviewBean.addMajorPoint()}" 
                    update="@this myForm:majorPointsTable:removeMajorPoint majorPointsTable"
                    process="@this myForm:majorPointsTable:removeMajorPoint majorPointsTable"/>


                <!-- MINOR POINTS TABLE -->
                <h4 class="rev-heading">Minor Points</h4>
                <p:dataTable id="minorPointsTable" 
                             editable="true"
                             binding="#{minorPointsBinding}"
                             widgetVar="minorPointsTable" 
                             value="#{reviewBean.minorPoints}" >
                    <f:facet name="header">Minor Points</f:facet>
                    <p:column>
                        <p:inputTextarea 
                            value="#{reviewBean.minorPoints[minorPointsBinding.rowIndex]}"
                            placeholder="Minor Point ##{minorPointsBinding.rowIndex + 1}"/>
                    </p:column>
                    <p:column>
                        <p:commandButton 
                            id="removeMinorPoint"
                            value="remove" 
                            type="submit"
                            disabled="#{reviewBean.minMinorPointsReached()}"
                            actionListener="#{reviewBean.removeMinorPointAtIx(minorPointsBinding.rowIndex)}"
                            update="@this :myForm:addMinorPoint minorPointsTable"
                            process="@this :myForm:addMinorPoint minorPointsTable"/>
                    </p:column>
                </p:dataTable>
                <p:commandButton 
                    id="addMinorPoint"
                    value="Add Minor Point"
                    type="submit"
                    disabled="#{reviewBean.maxMinorPointsReached()}"
                    actionListener="#{reviewBean.addMinorPoint()}" 
                    update="@this myForm:minorPointsTable:removeMinorPoint minorPointsTable"
                    process="@this myForm:minorPointsTable:removeMinorPoint minorPointsTable"/>


                <h4 class="rev-heading">Recommendation</h4>
                <p:selectOneMenu value="#{reviewBean.recommendation}">
                    <f:selectItems value="#{reviewBean.recommendations}"></f:selectItems>
                </p:selectOneMenu>


                <h4 class="rev-heading">Reviewer Name</h4>
                <p:inputText value="#{reviewBean.reviewerName}"/>

                <br/>
                <p:commandButton 
                    value="Blah" 
                    type="submit"
                    actionListener="#{reviewBean.attemptReviewSubmission()}"/>



            </h:form>
        </div>

    </h:body>


</html>

